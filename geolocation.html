<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script type="text/javascript">
    function geoFindMe() {
        if(window!=parent){
            alert('iframeで読み込まれています');
        }
        else if (window==parent){
            alert('iframeで読み込まれていないです');
        }
        
        var output = document.getElementById("out");
        if (!navigator.geolocation){
            output.innerHTML = "<p>Geolocation is not supported by your browser</p>";
            return;
        }

        function success(position) {
            alert('Geolocation changed');
            
            var latitude  = position.coords.latitude;
            var longitude = position.coords.longitude;
            output.innerHTML = '<p>Latitude is ' + latitude + '° <br>Longitude is ' + longitude + '°</p>';
        }

        function error() {
            output.innerHTML = "Unable to retrieve your location";
        }

        output.innerHTML = "<p>Locating…</p>";
        var watchID = navigator.geolocation.watchPosition(success, error);
    }
    </script>
  </head>
  <body onLoad="geoFindMe()">
    <div id="out"></div>
  </body>
</html>


